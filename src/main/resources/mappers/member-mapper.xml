<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="memberMapper">
	<resultMap type="Member" id="memberResultSet">
		<id column="USER_NO" property="userNo"/>
		<result column="USER_ID" property="userId"/>
		<result column="USER_PWD" property="userPwd"/>
		<result column="USER_NAME" property="userName"/>
		<result column="BIRTHDAY" property="birthday"/>
		<result column="PHONE" property="phone"/>
		<result column="ENROLL_DATE" property="enrollDate"/>
		<result column="MODIFY_DATE" property="modifyDate"/>
		<result column="BLACKLIST" property="blacklist"/>
		<result column="STATUS" property="status"/>
		<result column="DROP_DATE" property="dropDate"/>
		<result column="LAST_YEAR_USAGE" property="lastYearUsage"/>
		<result column="THIS_YEAR_USAGE" property="thisYearUsage"/>
		<result column="GRADE_CODE" property="gradeCode"/>
		<result column="REDCARD" property="redCard"/>
		<result column="LEAVE_REASON" property="leaveReason"></result>
	</resultMap>

	<select id="loginUser" resultMap="memberResultSet" parameterType="Member">
 	   	SELECT * 
		  FROM MEMBER
		 WHERE USER_ID = #{userId} 
	 	   AND STATUS = 'Y'
	</select>
	
	<select id="updateCheckPwd" resultMap="memberResultSet">
		SELECT USER_PWD
		  FROM MEMBER 
		WHERE USER_ID=#{userId}
	</select>
	
	<insert id="insertMember" parameterType="Member">
	  INSERT INTO MEMBER 
	  VALUES(SEQ_MEMBER.NEXTVAL, #{userId}, #{userPwd}, #{userName}, #{birthday}, #{phone}, 
	         SYSDATE, NULL, 'N', 'Y', NULL, NULL, NULL, 5, NULL)
	  </insert>

    <update id="updateMember" parameterType="Member">
		
		UPDATE MEMBER 
			set phone=#{phone}
				
		WHERE USER_ID=#{userId}
			
			
	</update>
	
	<delete id="deleteMember" parameterType="string">
		
		UPDATE MEMBER 
		 	set LEAVE_REASON=#{content}, status='N', DROP_DATE='SYSDATE'
		WHERE USER_NO=#{userNo}
		
	</delete>
	
	
	
</mapper>